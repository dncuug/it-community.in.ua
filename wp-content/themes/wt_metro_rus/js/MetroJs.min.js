/*!
* Metro JS for jQuery
* http://drewgreenwell.com/ 
* For details and usage info see: http://drewgreenwell.com/projects/metrojs
Copyright (C) 2012, Drew Greenwell
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), 
to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, 
and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, 
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
(function(n){var i,f;n.fn.metrojs={capabilities:null,checkCapabilities:function(t,i){return(n.fn.metrojs.capabilities==null||typeof i!="undefined"&&i==!0)&&(n.fn.metrojs.capabilities=new n.fn.metrojs.MetroModernizr(t)),n.fn.metrojs.capabilities}},i=n.fn.metrojs,f=99e3,n.fn.liveTile=function(t){var r,i;if(u[t]){for(r=[],i=1;i<=arguments.length;i++)r[i-1]=arguments[i];return u[t].apply(this,r)}return typeof t!="object"&&t?(n.error("Method "+t+" does not exist on jQuery.liveTile"),null):u.init.apply(this,arguments)},n.fn.liveTile.contentModules={modules:{},addContentModule:function(n,t){typeof this.modules!="object"&&(this.modules={}),this.modules[n]=t},hasContentModule:function(n){return typeof n=="undefined"||typeof this.modules!="object"?!1:typeof this.modules[n]!="undefined"}},n.fn.liveTile.defaults={mode:"slide",speed:500,initDelay:-1,delay:5e3,stops:"100%",stack:!1,direction:"vertical",animationDirection:"forward",tileSelector:">div,>li,>p,>img,>a",tileFaceSelector:">div,>li,>p,>img,>a",ignoreDataAttributes:!1,click:null,link:"",newWindow:!1,bounce:!1,pauseOnHover:!1,playOnHover:!1,repeatCount:-1,appendBack:!0,alwaysTrigger:!1,flipListOnHover:!1,currentIndex:0,startNow:!0,useModernizr:typeof window.Modernizr!="undefined",useHardwareAccel:!0,faces:{$front:null,$back:null},animationComplete:function(){},triggerDelay:function(){return Math.random()*3e3},swap:"",swapFront:"-",swapBack:"-",contentModules:[]};var u={init:function(r){var u={};return n.extend(u,n.fn.liveTile.defaults,r),i.checkCapabilities(u),n.fn.liveTile.contentModules.hasContentModule("image")||n.fn.liveTile.contentModules.addContentModule("image",e.imageSwap),n.fn.liveTile.contentModules.hasContentModule("html")||n.fn.liveTile.contentModules.addContentModule("html",e.htmlSwap),n(this).each(function(r,f){var o=n(f),e=t.initTileData(o,u);e.faces=t.prepTile(o,e),e.doAction=function(n){var t=null;switch(e.mode){case"slide":t=e.slide,e.loopCount=n;break;case"carousel":t=e.carousel,e.loopCount=n;break;case"flip":t=e.flip,e.loopCount=n;break;case"flip-list":t=e.flipList,e.loopCount=n}typeof t=="function"&&(t(n),e.hasRun=!0),n==e.timer.repeatCount&&(e.runEvents=!1)},e.slide=function(n){t.slide(o,n)},e.carousel=function(n){t.carousel(o,n)},e.flip=function(n){t.flip(o,n)},e.flipList=function(n){t.flipList(o,n)},e.timer=new n.fn.metrojs.TileTimer(e.delay,e.doAction,e.repeatCount),o.data("LiveTile",e),(e.mode!=="flip-list"||e.flipListOnHover==!1)&&(e.pauseOnHover?t.bindPauseOnHover(o):e.playOnHover&&t.bindPlayOnHover(o)),(e.link.length>0||typeof e.click=="function")&&o.css({cursor:"pointer"}).bind("click.liveTile",function(){var n=!0;typeof e.click=="function"&&(n=e.click(o,e)||!1),n&&e.link.length>0&&(e.newWindow?window.open(e.link):window.location=e.link)}),e.useHardwareAccel&&i.capabilities.canTransition&&t.bindBounce(o,e),e.startNow&&e.mode!="none"&&(e.runEvents=!0,e.timer.start(e.initDelay))})},goto:function(t){var i,r=typeof t,u;if(r!=="number"&&isNaN(t))if(r==="string")if(t=="next")i={index:-99,delay:0};else if(t.indexOf("prev")===0)i={index:-100,delay:0};else{n.error(t+' is not a recognized action for .liveTile("goto")');return}else r==="object"&&(typeof t.delay=="undefined"&&(t.delay=0),u=typeof t.index,u==="undefined"?t.index=0:u==="string"&&(t.index==="next"?t.index=-99:t.index.indexOf("prev")===0&&(t.index=-100)),i=t);else i={index:parseInt(t,10),delay:0};return n(this).each(function(t,r){var o=n(r),u=o.data("LiveTile"),s=o.data("metrojs.tile"),f=i.index,e;if(s.animating!==!0){if(u.mode==="carousel"){if(e=u.faces.$listTiles.filter(".active").index(),f===-100?(u.tempValues.animationDirection=typeof i.animationDirection=="undefined"?"backward":i.animationDirection,f=e===0?u.faces.$listTiles.length-1:e-1):f===-99&&(u.tempValues.animationDirection=typeof i.animationDirection=="undefined"?"forward":i.animationDirection,f=e+1),e==f)return;u.currentIndex=f==0?u.faces.$listTiles.length:f-1}else u.currentIndex=f;u.runEvents=!0,u.timer.start(i.delay>=0?i.delay:u.delay)}})},play:function(t){var i,r=typeof t;return r==="undefined"?i={delay:-1}:r==="number"?i={delay:t}:r==="object"&&(typeof t.delay=="undefined"&&(t.delay=-1),i=t),n(this).each(function(t,r){var f=n(r),u=f.data("LiveTile");u.runEvents=!0,i.delay<0&&!u.hasRun&&(i.delay=u.initDelay),u.timer.start(i.delay>=0?i.delay:u.delay)})},animate:function(){return n(this).each(function(t,i){var r=n(i),u=r.data("LiveTile");u.doAction()})},stop:function(){return n(this).each(function(t,i){var u=n(i),r=u.data("LiveTile");r.hasRun=!1,r.runEvents=!1,r.timer.stop(),window.clearTimeout(r.eventTimeout),window.clearTimeout(r.flCompleteTimeout),window.clearTimeout(r.completeTimeout),r.mode==="flip-list"&&(window.clearTimeout(r.completeTimeout),r.faces.$listTiles.each(function(t,i){var r=n(i).data("metrojs.tile");window.clearTimeout(r.eventTimeout),window.clearTimeout(r.flCompleteTimeout),window.clearTimeout(r.completeTimeout)}))})},pause:function(){return n(this).each(function(t,i){var u=n(i),r=u.data("LiveTile");r.timer.pause(),r.runEvents=!1,window.clearTimeout(r.eventTimeout),window.clearTimeout(r.flCompleteTimeout),window.clearTimeout(r.completeTimeout),r.mode==="flip-list"&&r.faces.$listTiles.each(function(t,i){var r=n(i).data("metrojs.tile");window.clearTimeout(r.eventTimeout),window.clearTimeout(r.flCompleteTimeout),window.clearTimeout(r.completeTimeout)})})},restart:function(t){var i,r=typeof t;return r==="undefined"?i={delay:-1}:r==="number"?i={delay:t}:r==="object"&&(typeof t.delay=="undefined"&&(t.delay=-1),i=t),n(this).each(function(t,r){var f=n(r),u=f.data("LiveTile");i.delay<0&&!u.hasRun&&(i.delay=u.initDelay),u.hasRun=!1,u.runEvents=!0,u.timer.restart(i.delay>=0?i.delay:u.delay)})},rebind:function(t){return n(this).each(function(i,r){var f=n(r);typeof t!="undefined"?(typeof t.timer!="undefined"&&t.timer!=null&&t.timer.stop(),t.hasRun=!1,u.init.apply(r,t)):u.init.apply(r,{})})},destroy:function(i){var u=typeof i,r;return u==="undefined"?r={removeCss:!1}:u==="boolean"?r={removeCss:option}:u==="object"&&(typeof i.removeCss=="undefined"&&(i.removeCss=!1),r=i),n(this).each(function(i,u){var e=n(u),f=e.data("LiveTile");e.unbind(".liveTile"),t.unbindMsBounce(e,f),f.timer.stop(),window.clearTimeout(f.eventTimeout),window.clearTimeout(f.flCompleteTimeout),window.clearTimeout(f.completeTimeout),f.faces.$listTiles!=null&&f.faces.$listTiles.each(function(t,i){var u=n(i),e;f.mode==="flip-list"&&(e=u.data("metrojs.tile"),window.clearTimeout(e.eventTimeout),window.clearTimeout(e.flCompleteTimeout),window.clearTimeout(e.completeTimeout)),r.removeCss?(u.removeClass("ha"),u.find(f.tileFaceSelector).unbind(".liveTile").removeClass("bounce flip-front flip-back ha slide slide-front slide-back").css({transform:"",transition:"",margin:"",cursor:""})):u.find(f.tileFaceSelector).unbind(".liveTile"),u.removeData("metrojs.tile")}).unbind(".liveTile"),f.faces.$front!=null&&r.removeCss&&f.faces.$front.removeClass("flip-front flip-back ha slide slide-front slide-back").css({transform:"",transition:""}),f.faces.$back!=null&&r.removeCss&&f.faces.$back.removeClass("flip-front flip-back ha slide slide-front slide-back").css({transform:"",transition:"",margin:"",cursor:""}),e.removeClass("ha"),e.removeData("LiveTile"),e.removeData("metrojs.tile"),f=null})}},t={getDataOrDefault:function(n,t,i){return typeof n.data(t)!="undefined"?n.data(t):i},initTileData:function(i,r){var f=!r.ignoreDataAttributes,u={speed:f?this.getDataOrDefault(i,"speed",r.speed):r.speed,delay:f?this.getDataOrDefault(i,"delay",r.delay):r.delay,stops:f?this.getDataOrDefault(i,"stops",r.stops):r.stops,stack:f?this.getDataOrDefault(i,"stack",r.stack):r.stack,mode:f?this.getDataOrDefault(i,"mode",r.mode):r.mode,direction:f?this.getDataOrDefault(i,"direction",r.direction):r.direction,useHardwareAccel:f?this.getDataOrDefault(i,"ha",r.useHardwareAccel):r.useHardwareAccel,repeatCount:f?this.getDataOrDefault(i,"repeat",r.repeatCount):r.repeatCount,swap:f?this.getDataOrDefault(i,"swap",r.swap):r.swap,appendBack:f?this.getDataOrDefault(i,"appendback",r.appendBack):r.appendBack,currentIndex:f?this.getDataOrDefault(i,"start-index",r.currentIndex):r.currentIndex,animationDirection:f?this.getDataOrDefault(i,"slide-direction",r.animationDirection):r.animationDirection,startNow:f?this.getDataOrDefault(i,"start-now",r.startNow):r.startNow,tileSelector:f?this.getDataOrDefault(i,"tile-selector",r.tileSelector):r.tileSelector,tileFaceSelector:f?this.getDataOrDefault(i,"face-selector",r.tileFaceSelector):r.tileFaceSelector,bounce:f?this.getDataOrDefault(i,"bounce",r.bounce):r.bounce,link:f?this.getDataOrDefault(i,"link",r.link):r.link,newWindow:f?this.getDataOrDefault(i,"new-window",r.newWindow):r.newWindow,alwaysTrigger:f?this.getDataOrDefault(i,"always-trigger",r.alwaysTrigger):r.alwaysTrigger,flipListOnHover:f?this.getDataOrDefault(i,"flip-onhover",r.flipListOnHover):r.flipListOnHover,pauseOnHover:f?this.getDataOrDefault(i,"pause-onhover",r.pauseOnHover):r.pauseOnHover,playOnHover:f?this.getDataOrDefault(i,"play-onhover",r.playOnHover):r.playOnHover,runEvents:!1,isReversed:!1,loopCount:0,contentModules:{},listData:[],height:i.height(),width:i.width(),tempValues:{}},e,o,h,c;u.margin=u.direction==="vertical"?u.height/2:u.width/2,u.stops=typeof r.stops=="object"&&r.stops instanceof Array?r.stops:(""+u.stops).split(","),u.stops.length===1&&u.stops.push("0px");var s=u.swap.replace(" ","").split(","),l=f?this.getDataOrDefault(i,"swap-front",r.swapFront):r.swapFront,a=f?this.getDataOrDefault(i,"swap-back",r.swapBack):r.swapBack;for(u.swapFront=l==="-"?s:l.replace(" ","").split(","),u.swapBack=a==="-"?s:a.replace(" ","").split(","),e=0;e<u.swapFront.length;e++)u.swapFront[e].length>0&&n.inArray(u.swapFront[e],s)===-1&&s.push(u.swapFront[e]);for(e=0;e<u.swapBack.length;e++)u.swapBack[e].length>0&&n.inArray(u.swapBack[e],s)===-1&&s.push(u.swapBack[e]);for(u.swap=s,e=0;e<s.length;e++)s[e].length>0&&typeof n.fn.liveTile.contentModules.modules[s[e]]!="undefined"&&(u.contentModules[s[e]]=n.fn.liveTile.contentModules.modules[s[e]]);u.initDelay=f?this.getDataOrDefault(i,"initdelay",r.initDelay):r.initDelay,u.delay<-1?u.delay=r.triggerDelay(1):u.delay<0&&(u.delay=3500+Math.random()*4501),u.initDelay<0&&(u.initDelay=u.delay),o={};for(h in u.contentModules)n.extend(o,u.contentModules[h].data);n.extend(o,r,u),o.mode==="flip-list"?(c=i.find(o.tileSelector).not(".tile-title"),c.each(function(i,r){var e=n(r),u={direction:f?t.getDataOrDefault(e,"direction",o.direction):o.direction,link:f?t.getDataOrDefault(e,"link",""):"",faces:{$front:null,$back:null},height:e.height(),width:e.width(),isReversed:!1};u.margin=u.direction==="vertical"?u.height/2:u.width/2,o.listData.push(u)})):o.mode==="carousel"&&(o.stack=!0,c=i.find(o.tileSelector).not(".tile-title"),c.each(function(i,r){var u=n(r),e={bounce:f?t.getDataOrDefault(u,"bounce",!1):!1,link:f?t.getDataOrDefault(u,"link",""):"",newWindow:f?t.getDataOrDefault(u,"new-window",""):""};o.listData.push(e)}));for(h in o.contentModules)typeof o.contentModules[h].initData=="function"&&o.contentModules[h].initData(o,i);return u=null,o},prepTile:function(u,e){var o,s,h,c,l,a;u.addClass(e.mode),o={$tileFaces:null,$listTiles:null,$front:null,$back:null};switch(e.mode){case"slide":o.$tileFaces=u.find(e.tileFaceSelector).not(".tile-title"),o.$front=e.faces.$front!=null&&e.faces.$front.length>0?e.faces.$front.addClass("slide-front"):o.$tileFaces.first().addClass("slide-front"),o.$back=e.faces.$back!=null&&e.faces.$back.length>0?e.faces.$back.addClass("slide-back"):o.$tileFaces.length>1?o.$tileFaces.last().addClass("slide-back"):e.appendBack?n('<div class="slide-back"><\/div>').appendTo(u):n("<div><\/div>"),e.stack==!0&&(e.direction==="vertical"?o.$back.css({top:-e.height+"px"}):o.$back.css({left:-e.width+"px"})),u.data("metrojs.tile",{animating:!1}),i.capabilities.canTransition&&e.useHardwareAccel&&(u.addClass("ha"),o.$front.addClass("ha"),o.$back.addClass("ha"));break;case"carousel":o.$listTiles=u.find(e.tileSelector).not(".tile-title"),a=o.$listTiles.length,u.data("metrojs.tile",{animating:!1}),e.currentIndex=Math.min(e.currentIndex,a-1),o.$listTiles.each(function(r,u){var f=n(u).addClass("slide"),o=e.listData[r];r==e.currentIndex?f.addClass("active"):e.animationDirection==="forward"?e.direction==="vertical"?f.css({top:e.height+"px"}):f.css({left:e.width+"px"}):e.animationDirection==="backward"&&(e.direction==="vertical"?f.css({top:-e.height+"px"}):f.css({left:-e.width+"px"})),t.bindLink(f,o),e.useHardwareAccel&&i.capabilities.canTransition&&t.bindBounce(f,o),f=null,o=null}),i.capabilities.canFlip3d&&e.useHardwareAccel&&(u.addClass("ha"),o.$listTiles.addClass("ha"));break;case"flip-list":o.$listTiles=u.find(e.tileSelector).not(".tile-title"),o.$listTiles.each(function(u,o){var a=n(o).addClass("tile-"+(u+1)),p=a.find(e.tileFaceSelector).first().addClass("flip-front").css({margin:"0px"}),v,y,w;a.find(e.tileFaceSelector).length===1&&e.appendBack==!0&&a.append("<div><\/div>"),v=a.find(e.tileFaceSelector).last().addClass("flip-back").css({margin:"0px"}),e.listData[u].faces.$front=p,e.listData[u].faces.$back=v,a.data("metrojs.tile",{animating:!1,count:1,completeTimeout:null,flCompleteTimeout:null,index:u}),y=a.data("metrojs.tile"),i.capabilities.canFlip3d&&e.useHardwareAccel?(a.addClass("ha"),p.addClass("ha"),v.addClass("ha"),s=e.listData[u].direction==="vertical"?"rotateX(180deg)":"rotateY(180deg)",h=r.appendStyleProperties({},["transform"],[s]),v.css(h)):(c=e.listData[u].direction==="vertical"?{height:"100%",width:"100%",marginTop:"0px",opacity:"1"}:{height:"100%",width:"100%",marginLeft:"0px",opacity:"1"},l=e.listData[u].direction==="vertical"?{height:"0px",width:"100%",marginTop:e.listData[u].margin+"px",opacity:"0"}:{height:"100%",width:"0px",marginLeft:e.listData[u].margin+"px",opacity:"0"},p.css(c),v.css(l)),w=function(){y.count++,y.count>=f&&(y.count=1)},e.flipListOnHover?(p.bind("mouseout.liveTile",function(){e.runEvents&&t.flip(a,y.count,e,w)}),v.bind("mouseout.liveTile",function(){e.runEvents&&t.flip(a,y.count,e,w)})):e.listData[u].link.length>0&&a.css({cursor:"pointer"}).bind("click.liveTile",function(){window.location=e.listData[u].link})});break;case"flip":o.$tileFaces=u.find(e.tileFaceSelector).not(".tile-title"),o.$front=e.faces.$front!=null&&e.faces.$front.length>0?e.faces.$front.addClass("flip-front"):o.$tileFaces.first().addClass("flip-front"),o.$back=e.faces.$back!=null&&e.faces.$back.length>0?e.faces.$back.addClass("flip-back"):o.$tileFaces.length>1?o.$tileFaces.last().addClass("flip-back"):e.appendBack?n('<div class="flip-back"><\/div>').appendTo(u):n("<div><\/div>"),u.data("metrojs.tile",{animating:!1}),i.capabilities.canFlip3d&&e.useHardwareAccel?(u.addClass("ha"),o.$front.addClass("ha"),o.$back.addClass("ha"),s=e.direction==="vertical"?"rotateX(180deg)":"rotateY(180deg)",h=r.appendStyleProperties({},["transform"],[s]),o.$back.css(h)):(c=e.direction==="vertical"?{height:"100%",width:"100%",marginTop:"0px",opacity:"1"}:{height:"100%",width:"100%",marginLeft:"0px",opacity:"1"},l=e.direction==="vertical"?{height:"0px",width:e.width+"px",marginTop:e.margin+"px",opacity:"0"}:{height:e.height+"px",width:"0px",marginLeft:e.margin+"px",opacity:"0"},o.$front.css(c),o.$back.css(l))}return o},bindPauseOnHover:function(t){function f(){u||r.runEvents&&(r.timer.pause(),u=!0,r.mode==="flip-list"&&r.faces.$listTiles.each(function(t,i){window.clearTimeout(n(i).data("metrojs.tile").completeTimeout)}))}function e(){u&&(r.runEvents&&r.timer.start(r.hasRun?r.delay:r.initDelay),u=!1)}var r=t.data("LiveTile"),u=!1;i.capabilities.canTouch?window.navigator.msPointerEnabled?(t[0].addEventListener("MSPointerOver",f,!1),t[0].addEventListener("MSPointerOut",e,!1)):(t.bind("touchstart.liveTile",f),t.bind("touchend.liveTile",e)):(t.bind("mouseover.liveTile",f),t.bind("mouseout.liveTile",e))},bindPlayOnHover:function(n){function f(){if(!r){var i=t.startNow?!t.isReversed:t.isReversed;window.clearTimeout(t.eventTimeout),(t.runEvents&&i||!t.hasRun)&&(r=!0,u.play.apply(n[0],[0]))}}function e(){r&&(window.clearTimeout(t.eventTimeout),t.eventTimeout=window.setTimeout(function(){var i=t.startNow?t.isReversed:!t.isReversed;t.runEvents&&i&&u.play.apply(n[0],[0]),r=!1},t.speed))}var t=n.data("LiveTile"),r=!1;n.addClass("noselect"),i.capabilities.canTouch?window.navigator.msPointerEnabled?(n[0].addEventListener("MSPointerDown",f,!1),n.bind("mouseleave.liveTile",e)):(n.bind("touchstart.liveTile",f),n.bind("touchend.liveTile",e)):n.bind({"mouseenter.liveTile":function(n){f(n)},"mouseleave.liveTile":function(n){e(n)}})},bindBounce:function(n,t){if(t.bounce){var i=r.appendStyleProperties({},["TransitionProperty","TransitionDuration"],["scale","200ms"]);n.addClass("bounce"),function(){function e(r){i={x:r.pageX,y:r.pageY},n.addClass("bounce-dwn"),t=!0}function r(){t===!0&&o()}function o(){n.removeClass("bounce-dwn"),t=!1,i=f}var t=!1,u=10,f={x:0,y:0},i=f;window.navigator.msPointerEnabled?(n[0].addEventListener("MSPointerDown",e,!1),n[0].addEventListener("MSPointerCancel",r,!1),n[0].addEventListener("MSPointerOut",r,!1),n[0].addEventListener("MSPointerUp",r,!1)):(n.bind("mousedown.liveTile touchstart.liveTile",e),n.bind("mouseup.liveTile touchend.liveTile, mouseout.liveTile touchcancel.liveTile",r))}()}},unbindMsBounce:function(n,t){t.bounce&&window.navigator.msPointerEnabled&&(n[0].removeEventListener("MSPointerDown",bounceDown,!1),n[0].removeEventListener("MSPointerCancel",bounceUp,!1),n[0].removeEventListener("MSPointerOut",bounceUp,!1))},bindLink:function(n,t){t.link.length>0&&n.css({cursor:"pointer"}).bind("click.liveTile",function(){t.newWindow?window.open(t.link):window.location=t.link})},slide:function(t,u,f,e,o){var s=typeof f=="undefined"?t.data("LiveTile"):f,c=t.data("metrojs.tile");if(c.animating==!0||t.is(":animated")){s=null,c=null;return}s.isReversed=s.mode!=="carousel"?u%2==0:!0,s.timer.pause();var h={},p={},k=typeof e=="undefined"?s.currentIndex:e,l=n.trim(s.stops[Math.min(k,s.stops.length-1)]),w=l.indexOf("px"),a=0,v=0,d=s.direction==="vertical"?s.height:s.width,y=s.direction==="vertical"?"top":"left",b=function(){typeof o=="undefined"?(s.currentIndex=s.currentIndex+1,s.currentIndex>s.stops.length-1&&(s.currentIndex=0)):o();for(var n in s.contentModules)s.contentModules[n].action(s,s.faces.$front,s.faces.$back,s.currentIndex);s.animationComplete(s,s.faces.$front,s.faces.$back),(s.timer.repeatCount>0||s.timer.repeatCount==-1)&&s.timer.count!=s.timer.repeatCount&&s.timer.start(s.delay),s=null,c=null};if(w>0?(v=parseInt(l.substring(0,w),10),a=v-d+"px"):(v=parseInt(l.replace("%",""),10),a=v-100+"%"),i.capabilities.canTransition&&s.useHardwareAccel){if(typeof c.animating!="undefined"&&c.animating==!0)return;c.animating=!0,h=r.appendStyleProperties(h,["TransitionProperty","TransitionDuration"],[y,s.speed+"ms"]),s.direction==="vertical"?h.top=l:h.left=l,s.faces.$front.css(h),s.stack==!0&&(s.direction==="vertical"?h.top=a:h.left=a,s.faces.$back.css(h)),window.clearTimeout(s.completeTimeout),s.completeTimeout=window.setTimeout(function(){c.animating=!1,b()},s.speed)}else h[y]=l,p[y]=a,c.animating=!0,s.faces.$front.stop().animate(h,s.speed,"linear",function(){c.animating=!1,b()}),s.stack==!0&&s.faces.$back.stop().animate(p,s.speed,"linear",function(){})},carousel:function(n,i){var u=n.data("LiveTile"),s=n.data("metrojs.tile"),v,o,f;if(s.animating==!0||u.faces.$listTiles.length<=1){s=null;return}u.timer.pause();var e=u.faces.$listTiles.filter(".active"),h=e.index(),l=Math.max(u.currentIndex,0),a=l!=h?l:h,c=a+1>=u.faces.$listTiles.length?0:a+1;if(h==c){s=null,e=null;return}v=typeof u.tempValues.animationDirection=="string"&&u.tempValues.animationDirection.length>0?u.tempValues.animationDirection:u.animationDirection,u.tempValues.animationDirection=null,o=u.faces.$listTiles.eq(c),f=r.appendStyleProperties({},["TransitionDuration"],["0s"]),v==="backward"?(u.direction==="vertical"?f.top="-100%":f.left="-100%",u.faces.$front=e,u.faces.$back=o,u.stops=["100%"]):(u.direction==="vertical"?f.top="100%":f.left="100%",u.faces.$front=o,u.faces.$back=e,u.stops=["0px"]),o.css(f),window.setTimeout(function(){(u.timer.repeatCount>0||u.timer.repeatCount==-1)&&u.timer.count!=u.timer.repeatCount&&u.timer.start(u.delay),t.slide(n,i,u,0,function(){e.css(f).removeClass("active"),o.addClass("active"),u.currentIndex=c,s=null,e=null,o=null})},200)},flip:function(n,t,u,f){var h=n.data("metrojs.tile"),b;if(h.animating==!0){anidata=null;return}var e=typeof u=="object"?u:n.data("LiveTile"),o,s,a,w,k,d,p=typeof f=="undefined",c=0,v=t%2==0;if(e.mode==="flip-list"?(c=h.index,o=e.listData[c].faces.$front,s=e.listData[c].faces.$back,e.listData[c].isReversed=v,a=e.listData[c].direction,height=e.listData[c].height,width=e.listData[c].width,margin=e.listData[c].margin):(o=e.faces.$front,s=e.faces.$back,e.isReversed=v,a=e.direction,height=e.height,width=e.width,margin=e.margin),i.capabilities.canFlip3d&&e.useHardwareAccel){w=v?"360deg":"180deg",k=a==="vertical"?"rotateX("+w+")":"rotateY("+w+")",d=r.appendStyleProperties({},["transform","transition"],[k,"all "+e.speed+"ms ease 0s"]);var g=v?"540deg":"360deg",it=a==="vertical"?"rotateX("+g+")":"rotateY("+g+")",rt=r.appendStyleProperties({},["transform","transition"],[it,"all "+e.speed+"ms ease 0s"]);o.css(d),s.css(rt),b=function(){h.animating=!1;var t,i,n;if(v){t=a==="vertical"?"rotateX(0deg)":"rotateY(0deg)",i=r.appendStyleProperties({},["transform","transition"],[t,"all 0s ease 0s"]),o.css(i);for(n in e.contentModules)e.contentModules[n].action(e,o,s,c);p?e.animationComplete(e,o,s):f(e,o,s),o=null,s=null,e=null,h=null}else{for(n in e.contentModules)e.contentModules[n].action(e,s,o,c);p?e.animationComplete(e,s,o):f(e,s,o)}},e.mode==="flip-list"?(window.clearTimeout(e.listData[c].completeTimeout),e.listData[c].completeTimeout=window.setTimeout(b,e.speed)):(window.clearTimeout(e.completeTimeout),e.completeTimeout=window.setTimeout(b,e.speed))}else{var l=e.speed/2,nt=a==="vertical"?{height:"0px",width:"100%",marginTop:margin+"px",opacity:"0"}:{height:"100%",width:"0px",marginLeft:margin+"px",opacity:"0"},tt=a==="vertical"?{height:"100%",width:"100%",marginTop:"0px",opacity:"1"}:{height:"100%",width:"100%",marginLeft:"0px",opacity:"1"},y;v?(h.animating=!0,s.stop().animate(nt,{duration:l}),y=function(){h.animating=!1,o.stop().animate(tt,{duration:l,complete:function(){for(var n in e.contentModules)e.contentModules[n].action(e,o,s,c);p?e.animationComplete(e,o,s):f(e,o,s),h=null,o=null,s=null}})},e.mode==="flip-list"?(window.clearTimeout(e.listData[h.index].completeTimeout),e.listData[h.index].completeTimeout=window.setTimeout(y,l)):(window.clearTimeout(e.completeTimeout),e.completeTimeout=window.setTimeout(y,l))):(h.animating=!0,o.stop().animate(nt,{duration:l}),y=function(){h.animating=!1,s.stop().animate(tt,{duration:l,complete:function(){for(var n in e.contentModules)e.contentModules[n].action(e,s,o,c);p?e.animationComplete(e,s,o):f(e,s,o),o=null,s=null,e=null,h=null}})},e.mode==="flip-list"?(window.clearTimeout(e.listData[h.index].completeTimeout),e.listData[h.index].completeTimeout=window.setTimeout(y,l)):(window.clearTimeout(e.completeTimeout),e.completeTimeout=window.setTimeout(y,l)))}},flipList:function(i){var r=i.data("LiveTile"),u=r.speed,e=!1;r.timer.pause(),r.faces.$listTiles.each(function(i,o){var h=n(o),s=h.data("metrojs.tile"),a=r.triggerDelay(i),l=r.speed+Math.max(a,0),c=r.alwaysTrigger;c||(c=Math.random()*351>150?!0:!1),c&&(e=!0,u=Math.max(l+r.speed,u),window.clearTimeout(s.flCompleteTimeout),s.flCompleteTimeout=window.setTimeout(function(){t.flip(h,s.count,r,function(){s.count++,s.count>=f&&(s.count=1),h=null,s=null})},l))}),e&&(window.clearTimeout(r.flCompleteTimeout),r.flCompleteTimeout=window.setTimeout(function(){for(var n in r.contentModules)r.contentModules[n].action(r,null,null,-1);r.animationComplete(r,null,null),(r.timer.repeatCount>0||r.timer.repeatCount==-1)&&r.timer.count!=r.timer.repeatCount&&r.timer.start(r.delay)},u+r.speed))}},r={stylePrefixes:"Webkit Moz O ms Khtml ".split(" "),domPrefixes:"-webkit- -moz- -o- -ms- -khtml- ".split(" "),appendStyleProperties:function(t,i,r){for(var f,u=0;u<=i.length-1;u++)for(f=0;f<=this.stylePrefixes.length-1;f++)t[n.trim(this.domPrefixes[f]+i[u])]=r[u];return t},shuffleArray:function(n){for(var t=[];n.length;)t.push(n.splice(Math.random()*n.length,1));while(t.length)n.push(t.pop());return n}},e={htmlSwap:{data:{frontContent:[],frontIsRandom:!0,frontIsInGrid:!1,backContent:[],backIsRandom:!0,backIsInGrid:!1},initData:function(i,r){var u={backBag:[],backIndex:0,backStaticIndex:0,backStaticRndm:-1,prevBackIndex:-1,frontBag:[],frontIndex:0,frontStaticIndex:0,frontStaticRndm:-1,prevFrontIndex:-1};u.frontIsRandom=i.ignoreDataAttributes?i.frontIsRandom:t.getDataOrDefault(r,"front-israndom",i.frontIsRandom),u.frontIsInGrid=i.ignoreDataAttributes?i.frontIsInGrid:t.getDataOrDefault(r,"front-isingrid",i.frontIsInGrid),u.backIsRandom=i.ignoreDataAttributes?i.backIsRandom:t.getDataOrDefault(r,"back-israndom",i.backIsRandom),u.backIsInGrid=i.ignoreDataAttributes?i.backIsInGrid:t.getDataOrDefault(r,"back-isingrid",i.backIsInGrid),u.doSwapFront=n.inArray("html",i.swapFront)>-1&&i.frontContent instanceof Array&&i.frontContent.length>0,u.doSwapBack=n.inArray("html",i.swapBack)>-1&&i.backContent instanceof Array&&i.backContent.length>0,i.htmlSwap=typeof i.htmlSwap!="undefined"?n.extend(u,i.htmlSwap):u,i.htmlSwap.doSwapFront&&(i.htmlSwap.frontBag=this.prepBag(i.htmlSwap.frontBag,i.frontContent,i.htmlSwap.prevFrontIndex),i.htmlSwap.frontStaticRndm=i.htmlSwap.frontBag.pop()),i.htmlSwap.doSwapBack&&(i.htmlSwap.backBag=this.prepBag(i.htmlSwap.backBag,i.backContent,i.htmlSwap.prevBackIndex),i.htmlSwap.backStaticRndm=i.htmlSwap.backBag.pop())},prepBag:function(n,t,i){var f,u;for(n=[],f=0,u=0;u<t.length;u++)(u!=i||n.length===1)&&(n[f]=u,f++);return r.shuffleArray(n)},getFrontSwapIndex:function(n){var t=0;return n.htmlSwap.frontIsRandom?(n.htmlSwap.frontBag.length===0&&(n.htmlSwap.frontBag=this.prepBag(n.htmlSwap.frontBag,n.frontContent,n.htmlSwap.prevFrontIndex)),t=n.htmlSwap.frontIsInGrid?n.htmlSwap.frontStaticRndm:n.htmlSwap.frontBag.pop()):t=n.htmlSwap.frontIsInGrid?n.htmlSwap.frontStaticIndex:n.htmlSwap.frontIndex,t},getBackSwapIndex:function(n){var t=0;return n.htmlSwap.backIsRandom?(n.htmlSwap.backBag.length===0&&(n.htmlSwap.backBag=this.prepBag(n.htmlSwap.backBag,n.backContent,n.htmlSwap.prevBackIndex)),t=n.htmlSwap.backIsInGrid?n.htmlSwap.backStaticRndm:n.htmlSwap.backBag.pop()):t=n.htmlSwap.backIsInGrid?n.htmlSwap.backStaticIndex:n.htmlSwap.backIndex,t},action:function(n,t,i,r){if(n.htmlSwap.doSwapFront||n.htmlSwap.doSwapBack){var f=n.mode==="flip-list",u=0,e=f?n.listData[Math.max(r,0)].isReversed:n.isReversed;if(f&&r==-1){e?n.htmlSwap.doSwapBack&&(n.htmlSwap.backBag.length===0&&(n.htmlSwap.backBag=this.prepBag(n.htmlSwap.backBag,n.backContent,n.htmlSwap.backStaticRndm)),n.htmlSwap.backStaticRndm=n.htmlSwap.backBag.pop(),n.htmlSwap.backStaticIndex++,n.htmlSwap.backStaticIndex>=n.backContent.length&&(n.htmlSwap.backStaticIndex=0)):n.htmlSwap.doSwapFront&&(n.htmlSwap.frontBag.length===0&&(n.htmlSwap.frontBag=this.prepBag(n.htmlSwap.frontBag,n.frontContent,n.htmlSwap.frontStaticRndm)),n.htmlSwap.frontStaticRndm=n.htmlSwap.frontBag.pop(),n.htmlSwap.frontStaticIndex++,n.htmlSwap.frontStaticIndex>=n.frontContent.length&&(n.htmlSwap.frontStaticIndex=0));return}if(e){if(!n.htmlSwap.doSwapBack)return;u=this.getBackSwapIndex(n),n.htmlSwap.prevBackIndex=u,i.html(n.backContent[n.htmlSwap.backIndex]),n.htmlSwap.backIndex++,n.htmlSwap.backIndex>=n.backContent.length&&(n.htmlSwap.backIndex=0),f||(n.htmlSwap.backStaticIndex++,n.htmlSwap.backStaticIndex>=n.backContent.length&&(n.htmlSwap.backStaticIndex=0))}else{if(!n.htmlSwap.doSwapFront)return;u=this.getFrontSwapIndex(n),n.htmlSwap.prevFrontIndex=u,n.mode==="slide"?data.startNow?i.html(n.frontContent[u]):t.html(n.frontContent[u]):i.html(n.frontContent[u]),n.htmlSwap.frontIndex++,n.htmlSwap.frontIndex>=n.frontContent.length&&(n.htmlSwap.frontIndex=0),f||(n.htmlSwap.frontStaticIndex++,n.htmlSwap.frontStaticIndex>=n.frontContent.length&&(n.htmlSwap.frontStaticIndex=0))}}}},imageSwap:{data:{preloadImages:!1,imageCssSelector:">img,>a>img",frontImages:[],frontIsRandom:!0,frontIsBackgroundImage:!1,frontIsInGrid:!1,backImages:null,backIsRandom:!0,backIsBackgroundImage:!1,backIsInGrid:!1},initData:function(i,r){var u={backBag:[],backIndex:0,backStaticIndex:0,backStaticRndm:-1,frontBag:[],frontIndex:0,frontStaticIndex:0,frontStaticRndm:-1,prevBackIndex:-1,prevFrontIndex:-1};u.imageCssSelector=i.ignoreDataAttributes?i.imageCssSelector:t.getDataOrDefault(r,"image-css",i.imageCssSelector),u.frontIsRandom=i.ignoreDataAttributes?i.frontIsRandom:t.getDataOrDefault(r,"front-israndom",i.frontIsRandom),u.frontIsInGrid=i.ignoreDataAttributes?i.frontIsInGrid:t.getDataOrDefault(r,"front-isingrid",i.frontIsInGrid),u.frontIsBackgroundImage=i.ignoreDataAttributes?i.frontIsBackgroundImage:t.getDataOrDefault(r,"front-isbg",i.frontIsBackgroundImage),u.backIsRandom=i.ignoreDataAttributes?i.backIsRandom:t.getDataOrDefault(r,"back-israndom",i.backIsRandom),u.backIsInGrid=i.ignoreDataAttributes?i.backIsInGrid:t.getDataOrDefault(r,"back-isingrid",i.backIsInGrid),u.backIsBackgroundImage=i.ignoreDataAttributes?i.backIsBackgroundImage:t.getDataOrDefault(r,"back-isbg",i.backIsBackgroundImage),u.doSwapFront=n.inArray("image",i.swapFront)>-1&&i.frontImages instanceof Array&&i.frontImages.length>0,u.doSwapBack=n.inArray("image",i.swapBack)>-1&&i.backImages instanceof Array&&i.backImages.length>0,i.imgSwap=typeof i.imgSwap!="undefined"?n.extend(u,i.imgSwap):u,i.imgSwap.doSwapFront&&(i.imgSwap.frontBag=this.prepBag(i.imgSwap.frontBag,i.frontImages,i.imgSwap.prevFrontIndex),i.imgSwap.frontStaticRndm=i.imgSwap.frontBag.pop(),i.preloadImages&&n(i.frontImages).metrojs.preloadImages(function(){})),i.imgSwap.doSwapBack&&(i.imgSwap.backBag=this.prepBag(i.imgSwap.backBag,i.backImages,i.imgSwap.prevBackIndex),i.imgSwap.backStaticRndm=i.imgSwap.backBag.pop(),i.preloadImages&&n(i.backImages).metrojs.preloadImages(function(){}))},prepBag:function(n,t,i){var f,u;for(n=[],f=0,u=0;u<t.length;u++)(u!=i||t.length===1)&&(n[f]=u,f++);return r.shuffleArray(n)},getFrontSwapIndex:function(n){var t=0;return n.imgSwap.frontIsRandom?(n.imgSwap.frontBag.length===0&&(n.imgSwap.frontBag=this.prepBag(n.imgSwap.frontBag,n.frontImages,n.imgSwap.prevFrontIndex)),t=n.imgSwap.frontIsInGrid?n.imgSwap.frontStaticRndm:n.imgSwap.frontBag.pop()):t=n.imgSwap.frontIsInGrid?n.imgSwap.frontStaticIndex:n.imgSwap.frontIndex,t},getBackSwapIndex:function(n){var t=0;return n.imgSwap.backIsRandom?(n.imgSwap.backBag.length===0&&(n.imgSwap.backBag=this.prepBag(n.imgSwap.backBag,n.backImages,n.imgSwap.prevBackIndex)),t=n.imgSwap.backIsInGrid?n.imgSwap.backStaticRndm:n.imgSwap.backBag.pop()):t=n.imgSwap.backIsInGrid?n.imgSwap.backStaticIndex:n.imgSwap.backIndex,t},setImageProperties:function(t,i,r){var f={},u={};typeof i.src!="undefined"&&(r?f.backgroundImage="url('"+i.src+"')":u.src=i.src),typeof i.alt!="undefined"&&(u.alt=i.alt),typeof i.css=="object"?t.css(n.extend(f,i.css)):t.css(f),typeof i.attr=="object"?t.attr(n.extend(u,i.attr)):t.attr(u)},action:function(n,t,i,r){var f,e,s;if(n.imgSwap.doSwapFront||n.imgSwap.doSwapBack){var o=n.mode==="flip-list",u=0,h=o?n.listData[Math.max(r,0)].isReversed:n.isReversed;if(o&&r==-1){h?n.imgSwap.doSwapBack&&(n.imgSwap.backBag.length===0&&(n.imgSwap.backBag=this.prepBag(n.imgSwap.backBag,n.backImages,n.imgSwap.backStaticRndm)),n.imgSwap.backStaticRndm=n.imgSwap.backBag.pop(),n.imgSwap.backStaticIndex++,n.imgSwap.backStaticIndex>=n.backImages.length&&(n.imgSwap.backStaticIndex=0)):n.imgSwap.doSwapFront&&(n.imgSwap.frontBag.length===0&&(n.imgSwap.frontBag=this.prepBag(n.imgSwap.frontBag,n.frontImages,n.imgSwap.frontStaticRndm)),n.imgSwap.frontStaticRndm=n.imgSwap.frontBag.pop(),n.imgSwap.frontStaticIndex++,n.imgSwap.frontStaticIndex>=n.frontImages.length&&(n.imgSwap.frontStaticIndex=0));return}if(h){if(!n.imgSwap.doSwapBack)return;u=this.getBackSwapIndex(n),n.imgSwap.prevBackIndex=u,f=i,e=f.find(n.imgSwap.imageCssSelector),s=typeof n.backImages[u]=="object"?n.backImages[u]:{src:n.backImages[u]},this.setImageProperties(e,s,n.imgSwap.backIsBackgroundImage),n.imgSwap.backIndex++,n.imgSwap.backIndex>=n.backImages.length&&(n.imgSwap.backIndex=0),o||(n.imgSwap.backStaticIndex++,n.imgSwap.backStaticIndex>=n.backImages.length&&(n.imgSwap.backStaticIndex=0))}else{if(!n.imgSwap.doSwapFront)return;u=this.getFrontSwapIndex(n),n.imgSwap.prevFrontIndex=u,f=n.mode==="slide"?t:i,e=f.find(n.imgSwap.imageCssSelector),s=typeof n.frontImages[u]=="object"?n.frontImages[u]:{src:n.frontImages[u]},this.setImageProperties(e,s,n.imgSwap.frontIsBackgroundImage),n.imgSwap.frontIndex++,n.imgSwap.frontIndex>=n.frontImages.length&&(n.imgSwap.frontIndex=0),o||(n.imgSwap.frontStaticIndex++,n.imgSwap.frontStaticIndex>=n.frontImages.length&&(n.imgSwap.frontStaticIndex=0))}f=null,e=null}}}};n.fn.metrojs.TileTimer=function(n,t,i){var r=this;this.timerId=null,this.interval=n,this.action=t,this.count=0,this.repeatCount=typeof i=="undefined"?0:i,this.start=function(t){window.clearTimeout(this.timerId),r.timerId=window.setTimeout(function(){r.action(r.count+1),r.count++,r.count>=f&&(r.count=0),(r.repeatCount>0||r.repeatCount==-1)&&(r.count!=r.repeatCount?r.start(n):r.stop())},t)},this.stop=function(){r.timerId=window.clearTimeout(this.timerId),r.reset()},this.resume=function(){(r.repeatCount>0||r.repeatCount==-1)&&r.count!=r.repeatCount&&r.start(n)},this.pause=function(){r.timerId=window.clearTimeout(this.timerId)},this.reset=function(){r.count=0},this.restart=function(n){r.stop(),r.start(n)}},jQuery.fn.metrojs.theme={loadDefaultTheme:function(n){var t,i,r;typeof n=="undefined"||n==null?n=jQuery.fn.metrojs.theme.defaults:(t=jQuery.fn.metrojs.theme.defaults,jQuery.extend(t,n),n=t),i=typeof window.localStorage!="undefined",r=function(n){return typeof window.localStorage[n]!="undefined"&&window.localStorage[n]!=null},!i||r("Metro.JS.AccentColor")&&r("Metro.JS.BaseAccentColor")?i?(n.accentColor=window.localStorage["Metro.JS.AccentColor"],n.baseTheme=window.localStorage["Metro.JS.BaseAccentColor"],jQuery(n.accentCssSelector).addClass(n.accentColor).data("accent",n.accentColor),jQuery(n.baseThemeCssSelector).addClass(n.baseTheme),typeof(n.loaded=="function")&&n.loaded(n.baseTheme,n.accentColor)):(jQuery(n.accentCssSelector).addClass(n.accentColor).data("accent",n.accentColor),jQuery(n.baseThemeCssSelector).addClass(n.baseTheme),typeof(n.loaded=="function")&&n.loaded(n.baseTheme,n.accentColor),typeof n.preloadAltBaseTheme!="undefined"&&n.preloadAltBaseTheme&&jQuery([n.baseTheme=="dark"?n.metroLightUrl:n.metroDarkUrl]).metrojs.preloadImages(function(){})):(window.localStorage["Metro.JS.AccentColor"]=n.accentColor,window.localStorage["Metro.JS.BaseAccentColor"]=n.baseTheme,jQuery(n.accentCssSelector).addClass(n.accentColor).data("accent",n.accentColor),jQuery(n.baseThemeCssSelector).addClass(n.baseTheme),typeof(n.loaded=="function")&&n.loaded(n.baseTheme,n.accentColor),typeof n.preloadAltBaseTheme!="undefined"&&n.preloadAltBaseTheme&&jQuery([n.baseTheme=="dark"?n.metroLightUrl:n.metroDarkUrl]).metrojs.preloadImages(function(){}))},applyTheme:function(n,t,i){var u,r,f,e;typeof i=="undefined"||i==null?i=jQuery.fn.metrojs.theme.defaults:(u=jQuery.fn.metrojs.theme.defaults,jQuery.extend(u,i),i=u),typeof n!="undefined"&&n!=null&&(typeof window.localStorage!="undefined"&&(window.localStorage["Metro.JS.BaseAccentColor"]=n),r=jQuery(i.baseThemeCssSelector),r.length>0&&(n=="dark"?r.addClass("dark").removeClass("light"):n=="light"&&r.addClass("light").removeClass("dark"))),typeof t!="undefined"&&t!=null&&(typeof window.localStorage!="undefined"&&(window.localStorage["Metro.JS.AccentColor"]=t),f=jQuery(i.accentCssSelector),f.length>0&&(e=!1,f.each(function(){var i,n;jQuery(this).addClass(t),i=jQuery(this).data("accent"),i!=t&&(n=jQuery(this).attr("class").replace(i,""),n=n.replace(/(\s)+/," "),jQuery(this).attr("class",n),jQuery(this).data("accent",t),e=!0)}),e&&typeof i.accentPicked=="function"&&i.accentPicked(t)))},appendAccentColors:function(t){var r,i;typeof t=="undefined"||t==null?t=jQuery.fn.metrojs.theme.defaults:(r=jQuery.fn.metrojs.theme.defaults,jQuery.extend(r,t),t=r);var u="",f=t.accentColors,e=t.accentListTemplate;for(i=0;i<f.length;i++)u+=e.replace(/\{0\}/g,f[i]);n(u).appendTo(t.accentListContainer)},appendBaseThemes:function(t){var r,i;typeof t=="undefined"||t==null?t=jQuery.fn.metrojs.theme.defaults:(r=jQuery.fn.metrojs.theme.defaults,jQuery.extend(r,t),t=r);var u="",f=t.baseThemes,e=t.baseThemeListTemplate;for(i=0;i<f.length;i++)u+=e.replace(/\{0\}/g,f[i]);n(u).appendTo(t.baseThemeListContainer)},defaults:{baseThemeCssSelector:"body",accentCssSelector:".tiles",accentColor:"blue",baseTheme:"dark",accentColors:["amber","brown","cobalt","crimson","cyan","magenta","lime","indigo","green","emerald","mauve","olive","orange","pink","red","sienna","steel","teal","violet","yellow"],baseThemes:["light","dark"],accentListTemplate:"<li><a href='javascript:;' title='{0}' class='accent {0}'><\/a><\/li>",accentListContainer:".theme-options",baseThemeListTemplate:"<li><a href='javascript:;' title='{0}' class='accent {0}'><\/a><\/li>",baseThemeListContainer:".base-theme-options"}},jQuery.fn.applicationBar=function(t){var i=typeof jQuery.fn.metrojs.theme!="undefined"?jQuery.fn.metrojs.theme.defaults:{},r,u,f;jQuery.extend(i,jQuery.fn.applicationBar.defaults,t),typeof jQuery.fn.metrojs.theme!="undefined"&&(r=jQuery.fn.metrojs.theme,t.shouldApplyTheme&&r.loadDefaultTheme(i),u=i.accentListContainer+" a",n(u).live("click",function(){var n=jQuery(this).attr("class").replace("accent","").replace(" ","");r.applyTheme(null,n,i),typeof i.accentPicked=="function"&&i.accentPicked(n)}),f=i.baseThemeListContainer+" a",n(f).live("click",function(){var n=jQuery(this).attr("class").replace("accent","").replace(" ","");r.applyTheme(n,null,i),typeof i.themePicked=="function"&&i.themePicked(n)})),jQuery(this).each(function(){var n=jQuery(this);navigator.userAgent.match(/(Android|webOS|iPhone|iPod|BlackBerry|PIE|IEMobile)/i)&&(navigator.userAgent.match(/(IEMobile\/1)/i)||navigator.userAgent.match(/(iPhone OS [56789])/i)||n.css({position:"absolute",bottom:"0px"})),n.animateAppBar=function(t){var r=t?i.collapseHeight:i.expandHeight;t?n.removeClass("expanded"):n.hasClass("expanded")||n.addClass("expanded"),n.stop().animate({height:r},{duration:i.duration})},n.find("a.etc").click(function(){n.animateAppBar(n.hasClass("expanded"))}),i.bindKeyboard==!0&&jQuery(document.documentElement).keyup(function(t){t.keyCode==38?t.target&&t.target.tagName.match(/INPUT|TEXTAREA|SELECT/i)==null&&(n.hasClass("expanded")||n.animateAppBar(!1)):t.keyCode==40&&t.target&&t.target.tagName.match(/INPUT|TEXTAREA|SELECT/i)==null&&n.hasClass("expanded")&&n.animateAppBar(!0)})})},jQuery.fn.applicationBar.defaults={applyTheme:!0,themePicked:function(){},accentPicked:function(){},loaded:function(){},duration:300,expandHeight:"320px",collapseHeight:"60px",bindKeyboard:!0,metroLightUrl:"images/metroIcons_light.jpg",metroDarkUrl:"images/metroIcons.jpg",preloadAltBaseTheme:!1},jQuery.fn.metrojs.preloadImages=function(n){var t=jQuery(this).toArray(),i=jQuery("<img style='display:none;' />").appendTo("body");jQuery(this).each(function(){i.attr({src:this}).load(function(){for(var r=jQuery(this).attr("src"),i=0;i<t.length;i++)t[i]==element&&t.splice(i,1);t.length==0&&n()})}),i.remove()},n.fn.metrojs.MetroModernizr=function(t){if(typeof t=="undefined"&&(t={useHardwareAccel:!0,useModernizr:typeof window.Modernizr!="undefined"}),this.canTransform=!1,this.canTransition=!1,this.canTransform3d=!1,this.canAnimate=!1,this.canTouch=!1,this.canFlip3d=t.useHardwareAccel,t.useHardwareAccel==!0)if(t.useModernizr==!1)if(typeof window.MetroModernizr!="undefined")this.canTransform=window.MetroModernizr.canTransform,this.canTransition=window.MetroModernizr.canTransition,this.canTransform3d=window.MetroModernizr.canTransform3d,this.canAnimate=window.MetroModernizr.canAnimate,this.canTouch=window.MetroModernizr.canTouch;else{window.MetroModernizr={};var i="metromodernizr",r=document.documentElement,e=document.head||document.getElementsByTagName("head")[0],u=document.createElement(i),o=u.style,s=" -webkit- -moz- -o- -ms- ".split(" "),l="Webkit Moz O ms Khtml".split(" "),f=function(n,t){for(var i in n)if(o[n[i]]!==undefined&&(!t||t(n[i],u)))return!0},h=function(n,t){var i=n.charAt(0).toUpperCase()+n.substr(1),r=(n+" "+l.join(i+" ")+i).split(" ");return!!f(r,t)},a=function(){var n=!!f(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);return n&&"webkitPerspective"in r.style&&(n=c(["@media (",s.join("transform-3d),("),i,")","{#metromodernizr{left:9px;position:absolute;height:3px;}}"].join(""),function(n){return n.offsetHeight===3&&n.offsetLeft===9})),n},c=function(n,t){var f=document.createElement("style"),u=document.createElement("div"),o;return f.textContent=n,e.appendChild(f),u.id=i,r.appendChild(u),o=t(u),f.parentNode.removeChild(f),u.parentNode.removeChild(u),!!o};function n(){return canTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||typeof window.navigator.msMaxTouchPoints!="undefined"&&window.navigator.msMaxTouchPoints>0||c(["@media (",s.join("touch-enabled),("),i,")","{#metromodernizr{top:9px;position:absolute}}"].join(""),function(n){return n.offsetTop===9})}this.canTransform=!!f(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]),this.canTransition=h("transitionProperty"),this.canTransform3d=a(),this.canAnimate=h("animationName"),this.canTouch=n(),window.MetroModernizr.canTransform=this.canTransform,window.MetroModernizr.canTransition=this.canTransition,window.MetroModernizr.canTransform3d=this.canTransform3d,window.MetroModernizr.canAnimate=this.canAnimate,window.MetroModernizr.canTouch=this.canTouch,r=null,e=null,u=null,o=null}else this.canTransform=n("html").hasClass("csstransforms"),this.canTransition=n("html").hasClass("csstransitions"),this.canTransform3d=n("html").hasClass("csstransforms3d"),this.canAnimate=n("html").hasClass("cssanimations"),this.canTouch=n("html").hasClass("touch")||typeof window.navigator.msMaxTouchPoints!="undefined"&&window.navigator.msMaxTouchPoints>0;this.canFlip3d=this.canFlip3d&&this.canAnimate&&this.canTransform&&this.canTransform3d}})(jQuery);